# 用户中心

知识星球第一个项目 -- 用户中心

能够学习的点：

1. 学习做项目的完整流程
2. 学习如何部署上线一个项目
3. 将此项目作为一个基础项目，以后的后端项目都可以基于此项目进行二次开发

## 做项目的流程

需求分析 => 设计 => 技术选型 => 初始化项目 => 写demo => 写代码 => 测试 => 代码提交 => 部署 => 发布



## 需求分析

1. 用户登录 / 注册
2. 用户管理 （仅管理员可见）
   * 对用户进行查询
3. 用户校验 （选填邀请码）



## 技术选型

前端：Ant Design Pro + Umi UI

后端：SSM + SpringBoot

部署： 服务器 / 容器（平台）



## 项目初始化

前端初始化：

…………

后端初始化：

…………



建表：

user表…………



## 业务编写

### 注册逻辑

1. 用户输入账号和密码和确认密码以及可选邀请码
2. 校验传参
   * 账户不小于四位
   * 密码不小于八位
   * 账号和密码不能包含特殊字符
   * 密码和确认密码需要相同
   * 如果填写了邀请码则校验邀请码是否正确以及确认邀请人身份（todo）
3. 对密码进行md5加密
4. 存储用户
5. 注册成功



### 登录逻辑

1. 用户输入账号和密码
2. 校验传参（与注册方法一致）
3. 校验密码
4. 登录成功
5. 记录用户的登录态
6. 返回脱敏后的用户信息



> 注意封装请求体，保持简洁规范的代码编写规范



### 搜索用户逻辑

1. 封装搜索体
2. 根据搜索体中定义的搜索条件搜索用户



## 跨域问题

解决跨域的几种方式：

1. SpringBoot后端配置跨域
2. 前端编写proxy代理
3. nginx、tomcat等web服务器配置跨域



**比较推荐的安全的解决方案：第三种**



## 后端代码优化



### 通用返回类

> 作用：让前端能更好更明白的接收参数，一般格式如下

```json
{
    "code": 200,
    "data": {},
    "message": "",
    description: ""
}
```

> 如果要做的更好的话，可以编写一个code文档，前端可以通过code文档查询到对应的报错信息

### 自定义异常类 + 全局异常拦截器

> 作用：对项目中的所有报错异常进行拦截，统一封装成通用返回类进行返回
>
> **后端报错信息不能暴露给前端，容易暴露自己的数据库或者代码结构，不安全**



## 多环境

[多环境设计_程序员鱼皮的博客-CSDN博客](https://blog.csdn.net/weixin_41701290/article/details/120173283?ops_request_misc=%7B%22request%5Fid%22%3A%22169624603016800197028923%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fblog.%22%7D&request_id=169624603016800197028923&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-120173283-null-null.nonecase&utm_term=多环境&spm=1018.2226.3001.4450)



## 前端部署

nginx 服务器

nginx配置代理（使用proxy_pass反向代理）



## 后端部署

使用maven打包

nohup后台运行
